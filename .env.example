# NewAPI Middleware Tool - Environment Configuration
#
# 推荐使用 deploy.sh 自动生成此文件
# 手动配置时，复制此文件为 .env 并修改

# ===========================================
# NewAPI 环境 (由 deploy.sh 自动检测)
# ===========================================

# NewAPI 容器名
NEWAPI_CONTAINER=new-api

# NewAPI Docker 网络名
NEWAPI_NETWORK=

# ===========================================
# 数据库配置 (SQL_DSN 优先)
# ===========================================

# 方式1: 连接字符串 (与 NewAPI 兼容，优先使用)
# PostgreSQL: postgresql://user:password@host:port/dbname
# MySQL: user:password@tcp(host:port)/dbname
SQL_DSN=postgresql://root:123456@postgres:5432/new-api

# 方式2: 分离变量 (SQL_DSN 未设置时使用)
# DB_ENGINE=postgres
# DB_DNS=postgres
# DB_PORT=5432
# DB_NAME=new-api
# DB_USER=postgres
# DB_PASSWORD=

# ===========================================
# 认证配置
# ===========================================

# 前端访问密码 (必填)
ADMIN_PASSWORD=

# 后端 API Key (必填，deploy.sh 会自动生成)
API_KEY=

# JWT 密钥 (deploy.sh 会自动生成)
JWT_SECRET=

# JWT 过期时间 (小时)
JWT_EXPIRE_HOURS=24

# ===========================================
# 服务配置
# ===========================================

# 服务端口 (一体化模式，默认: 3000)
PORT=3000

# 运行模式: debug, release, test
SERVER_MODE=release

# ===========================================
# AI 自动封禁配置
# ===========================================
# 注意: AI 自动封禁的配置已移至前端界面
# 请在风控中心 -> AI 封禁 -> 配置面板中进行设置
# 配置将保存到本地 SQLite 数据库中

# ===========================================
# Redis 缓存配置 (REDIS_CONN_STRING 优先)
# ===========================================

# 方式1: 连接字符串 (与 NewAPI 兼容，优先使用)
REDIS_CONN_STRING=redis://redis

# 方式2: 分离变量 (REDIS_CONN_STRING 未设置时使用)
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0
